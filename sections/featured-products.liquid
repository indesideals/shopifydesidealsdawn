<div class="featured-products">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Featured Products</h2>
      <p class="section-subtitle">Discover our most popular items</p>
    </div>
    
    <div class="products-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
      {% for product in collections.all.products limit: 4 %}
        <div class="product-card" style="background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
          <div class="product-image" style="height: 200px; background: #f0f0f0; display: flex; align-items: center; justify-content: center;">
            {% if product.featured_image %}
              <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}" style="width: 100%; height: 100%; object-fit: cover;">
            {% else %}
              <span style="color: #999;">No image</span>
            {% endif %}
          </div>
          
          <div class="product-info" style="padding: 1.5rem;">
            <h3 style="margin: 0 0 0.5rem 0; font-size: 1.1rem;">
              <a href="{{ product.url }}" style="text-decoration: none; color: var(--color-primary);">{{ product.title }}</a>
            </h3>
            
            <!-- Product Rating -->
            <div class="product-rating" style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.75rem;">
              <div class="stars" style="display: flex; gap: 0.125rem;">
                <span class="star filled" style="color: #fbbf24;">★</span>
                <span class="star filled" style="color: #fbbf24;">★</span>
                <span class="star filled" style="color: #fbbf24;">★</span>
                <span class="star filled" style="color: #fbbf24;">★</span>
                <span class="star filled" style="color: #fbbf24;">★</span>
              </div>
              <span style="font-size: 0.8rem; color: #6b7280;">4.8 (100)</span>
            </div>
            
            <div class="product-price" style="margin-bottom: 1rem;">
              {% assign selling_price = product.price | divided_by: 100 | round %}
              {% assign compare_price = selling_price | times: 1.4 | round %}
              <span style="text-decoration: line-through; color: #999; margin-right: 0.5rem;">₹{{ compare_price }}</span>
              <span style="font-weight: bold; color: var(--color-accent);">₹{{ selling_price }}</span>
            </div>
            
            <button type="button" class="btn add-to-cart" style="width: 100%;"
                    onclick="addToCartDirect('{{ product.id }}', '{{ product.selected_or_first_available_variant.id }}', '{{ product.title | escape }}', '{{ product.price | divided_by: 100.0 }}', '{{ product.featured_image | image_url: width: 300 }}', '{{ product.url }}')">
              Add to Cart
            </button>
          </div>
        </div>
      {% endfor %}
    </div>
    
    <div class="section-footer">
              <a href="/collections/all" class="btn btn-outline">View All Products</a>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Featured Products",
  "settings": [
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 2,
      "max": 12,
      "step": 1,
      "default": 4,
      "label": "Maximum products to show"
    }
  ],
  "presets": [
    {
      "name": "Featured Products"
    }
  ]
}
{% endschema %}
