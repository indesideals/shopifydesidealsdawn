<!-- Trending Products Section -->
<div class="trending-products-section">
  <div class="container">
    <!-- Section Header -->
    <div class="trending-header">
      <h2 class="trending-title">{{ section.settings.section_title | default: "Today's Trending Products" }}</h2>
      <p class="trending-subtitle">{{ section.settings.love_text | default: "LOVED BY OUR CUSTOMERS" }}</p>
    </div>
    
    <!-- Single Product Display -->
    <div class="trending-product-container">
      {% if section.settings.featured_product %}
        <div class="trending-product-left">
          <!-- Desktop Image Gallery -->
          <div class="product-gallery">
            <!-- Thumbnail Navigation (Left Side) -->
            <div class="thumbnail-container">
              {% assign product_images = section.settings.featured_product.images %}
              {% for image in product_images limit: 5 %}
                <div class="thumbnail-item {% if forloop.first %}active{% endif %}" 
                     onclick="trendingSelectImage({{ forloop.index0 }})"
                     data-image-index="{{ forloop.index0 }}"
                     data-image-url="{{ image | image_url: width: 500 }}">
                  <img src="{{ image | image_url: width: 100 }}" 
                       alt="{{ section.settings.featured_product.title }} - Image {{ forloop.index }}"
                       class="thumbnail-image">
                </div>
              {% endfor %}
            </div>
            
            <!-- Main Image Display -->
            <div class="main-image-container">
              <img src="{{ trendingProductImages[0].url }}" 
                   alt="{{ section.settings.featured_product.title }}" 
                   class="main-product-image"
                   id="main-product-image">
              
              <!-- Navigation Arrows -->
              <button class="gallery-nav prev-btn" onclick="trendingChangeImage(-1)" aria-label="Previous image">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              <button class="gallery-nav next-btn" onclick="trendingChangeImage(1)" aria-label="Next image">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
              
              {% if section.settings.show_badge %}
                <div class="trending-badge">
                  <span>{{ section.settings.badge_text | default: "ðŸ”¥ HOT" }}</span>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
        
        <div class="trending-product-right">
          <div class="product-info-container">
            <div class="trending-product-header">
              <h2 class="trending-product-title">{{ section.settings.featured_product.title }}</h2>
              <button class="trending-wishlist-btn favorite-btn" 
                      onclick="addToWishlist('{{ section.settings.featured_product.id }}', '{{ section.settings.featured_product.title | escape }}', '{{ section.settings.featured_product.price | divided_by: 100.0 }}', '{{ section.settings.featured_product.featured_image | img_url: '400x400' }}', '{{ section.settings.featured_product.url }}')" 
                      aria-label="Add to wishlist"
                      data-product-id="{{ section.settings.featured_product.id }}">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                </svg>
              </button>
            </div>
            
            <!-- Star Rating and Reviews -->
            <div class="product-rating">
              <div class="stars">
                <span class="star filled" style="color: #fbbf24;">â˜…</span>
                <span class="star filled" style="color: #fbbf24;">â˜…</span>
                <span class="star filled" style="color: #fbbf24;">â˜…</span>
                <span class="star filled" style="color: #fbbf24;">â˜…</span>
                <span class="star filled" style="color: #fbbf24;">â˜…</span>
              </div>
              <span class="rating-text">4.8</span>
              <span class="reviews-text">(1247 reviews)</span>
            </div>
            
            <div class="trending-product-price">
              {% assign selling_price = section.settings.featured_product.price | divided_by: 100 | round %}
              {% assign compare_price = selling_price | times: 1.4 | round %}
              <span class="trending-original-price">â‚¹{{ compare_price }}</span>
              <span class="trending-sale-price">â‚¹{{ selling_price }}</span>
              <span class="sale-badge">40% OFF</span>
            </div>
            
            <div class="trending-buttons">
              <button type="button" class="trending-add-to-cart-btn"
                      onclick="addToCartDirect('{{ section.settings.featured_product.id }}', '{{ section.settings.featured_product.selected_or_first_available_variant.id }}', '{{ section.settings.featured_product.title | escape }}', '{{ section.settings.featured_product.price | divided_by: 100.0 }}', '{{ section.settings.featured_product.featured_image | image_url: width: 300 }}', '{{ section.settings.featured_product.url }}')">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M9 22C9.55228 22 10 21.5523 10 21C10 20.4477 9.55228 20 9 20C8.44772 20 8 20.4477 8 21C8 21.5523 8.44772 22 9 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M20 22C20.5523 22 21 21.5523 21 21C21 20.4477 20.5523 20 20 20C19.4477 20 19 20.4477 19 21C19 21.5523 19.4477 22 20 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M1 1H5L7.68 14.39C7.77144 14.8504 8.02191 15.264 8.38755 15.5583C8.75318 15.8526 9.2107 16.009 9.68 16H19.4C19.8693 16.009 20.3268 15.8526 20.6925 15.5583C21.0581 15.264 21.3086 14.8504 21.4 14.39L23 6H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Add to Cart
              </button>
            </div>
            
            <!-- Product Accordions -->
            <div class="trending-accordions">
              <div class="accordion-item" data-accordion="1">
                <button class="accordion-header" type="button" style="cursor: pointer; width: 100%; text-align: left;">
                  <span>ðŸ“¦ Product Details</span>
                  <svg class="accordion-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="accordion-content">
                  <p>{{ section.settings.product_details | default: "Premium quality product with durable construction. Made from high-grade materials for long-lasting performance." }}</p>
                </div>
              </div>
              
              <div class="accordion-item" data-accordion="2">
                <button class="accordion-header" type="button" style="cursor: pointer; width: 100%; text-align: left;">
                  <span>ðŸšš Shipping Info</span>
                  <svg class="accordion-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="accordion-content">
                  <p>{{ section.settings.shipping_info | default: "Free shipping above â‚¹299. Delivery: 3-5 days. Express available." }}</p>
                </div>
              </div>
              
              <div class="accordion-item" data-accordion="3">
                <button class="accordion-header" type="button" style="cursor: pointer; width: 100%; text-align: left;">
                  <span>ðŸ“– How to Use</span>
                  <svg class="accordion-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                  </svg>
                </button>
                <div class="accordion-content">
                  <p>{{ section.settings.how_to_use | default: "Follow included manual. Ensure proper setup for best results." }}</p>
                </div>
              </div>
            </div>
            
            <a href="{{ section.settings.featured_product.url }}" class="view-details-link">
              View full details â†’
            </a>
            

          </div>
        </div>
      {% endif %}
    </div>
  </div>
</div>

<script>
// Product Image Gallery Functionality for Trending Products
let trendingCurrentImageIndex = 0;
let trendingProductImages = [];

document.addEventListener('DOMContentLoaded', function() {
  // Initialize wishlist system for trending products
  initTrendingWishlistSystem();
  
  // Get all thumbnail items for trending products
  const thumbnailItems = document.querySelectorAll('.trending-products-section .thumbnail-item');
  
  if (thumbnailItems.length > 0) {
    // Extract image URLs from thumbnails
    trendingProductImages = Array.from(thumbnailItems).map(item => {
      return {
        url: item.getAttribute('data-image-url'),
        index: parseInt(item.getAttribute('data-image-index'))
      };
    });
    
    // Sort by index to ensure correct order
    trendingProductImages.sort((a, b) => a.index - b.index);
    
    console.log('Trending product images loaded:', trendingProductImages.length);
    
    // Initialize gallery
    if (trendingProductImages.length > 0) {
      trendingUpdateMainImage(0);
    }
  }
});

// Wishlist functionality for trending products
function initTrendingWishlistSystem() {
  // Check if Wishlist Plus app is installed
  checkTrendingWishlistApp();
  
  // Set up event listeners
  setupTrendingWishlistEvents();
  
  // Initialize UI
  initializeTrendingWishlistUI();
}

function checkTrendingWishlistApp() {
  // Check for Wishlist Plus app presence
  const appScript = document.querySelector('script[src*="wishlist-plus"]');
  const appElement = document.querySelector('[data-wishlist-app]');
  
  if (appScript || appElement) {
    console.log('âœ… Wishlist Plus app detected in trending products - using app functionality');
    window.wishlistAppInstalled = true;
  } else {
    console.log('âš ï¸ Wishlist Plus app not detected in trending products - using fallback');
    window.wishlistAppInstalled = false;
  }
}

function setupTrendingWishlistEvents() {
  // Listen for app installation
  window.addEventListener('wishlist-app-installed', function() {
    window.wishlistAppInstalled = true;
    updateTrendingWishlistButtons();
  });
  
  // Listen for customer login
  window.addEventListener('customer-login', function() {
    updateTrendingWishlistButtons();
  });
}

function initializeTrendingWishlistUI() {
  if (window.wishlistAppInstalled) {
    document.body.classList.add('wishlist-app-active');
  }
  updateTrendingWishlistButtons();
}

function updateTrendingWishlistButtons() {
  {% if customer %}
    // Get all wishlist buttons in trending products section
    const wishlistButtons = document.querySelectorAll('.trending-products-section .wishlist-btn');
    
    wishlistButtons.forEach(button => {
      const productId = button.getAttribute('data-product-id');
      if (productId) {
        const isInWishlist = checkIfInWishlist(productId);
        updateTrendingWishlistButton(productId, isInWishlist);
      }
    });
  {% endif %}
}

function updateTrendingWishlistButton(productId, isInWishlist) {
  const button = document.querySelector(`.trending-products-section [data-product-id="${productId}"]`);
  if (button) {
    const svg = button.querySelector('svg');
    if (isInWishlist) {
      button.classList.add('active');
      svg.style.fill = 'white';
      svg.style.stroke = 'white';
    } else {
      button.classList.remove('active');
      svg.style.fill = 'none';
      svg.style.stroke = 'currentColor';
    }
  }
}

function checkIfInWishlist(productId) {
  {% if customer %}
    if (window.wishlistAppInstalled) {
      // Check via app API
      if (window.wishlistApp && window.wishlistApp.isInWishlist) {
        return window.wishlistApp.isInWishlist(productId);
      }
      return false;
    } else {
      // Check via localStorage
      const customerId = '{{ customer.id }}';
      const wishlistKey = `wishlist_${customerId}`;
      const favorites = JSON.parse(localStorage.getItem(wishlistKey) || '[]');
      return favorites.some(product => product.id === productId);
    }
  {% else %}
    return false;
  {% endif %}
}

function trendingSelectImage(index) {
  console.log('Selecting image:', index);
  if (index >= 0 && index < trendingProductImages.length) {
    trendingCurrentImageIndex = index;
    trendingUpdateMainImage(index);
    trendingUpdateThumbnailActive(index);
  }
}

function trendingChangeImage(direction) {
  console.log('Changing image direction:', direction);
  const newIndex = trendingCurrentImageIndex + direction;
  
  if (newIndex < 0) {
    // Wrap to last image
    trendingSelectImage(trendingProductImages.length - 1);
  } else if (newIndex >= trendingProductImages.length) {
    // Wrap to first image
    trendingSelectImage(0);
  } else {
    trendingSelectImage(newIndex);
  }
}

function trendingUpdateMainImage(index) {
  const mainImage = document.getElementById('main-product-image');
  if (mainImage && trendingProductImages[index]) {
    console.log('Updating main image to:', trendingProductImages[index].url);
    
    // Create new image to preload
    const newImage = new Image();
    newImage.onload = function() {
      // Image loaded successfully
      mainImage.src = trendingProductImages[index].url;
    };
    
    newImage.onerror = function() {
      // Image failed to load
      console.error('Failed to load image:', trendingProductImages[index].url);
    };
    
    // Start loading the new image
    newImage.src = trendingProductImages[index].url;
  }
}

function trendingUpdateThumbnailActive(index) {
  // Remove active class from all thumbnails
  const thumbnails = document.querySelectorAll('.trending-products-section .thumbnail-item');
  thumbnails.forEach(thumb => thumb.classList.remove('active'));
  
  // Add active class to current thumbnail
  const currentThumbnail = document.querySelector(`.trending-products-section [data-image-index="${index}"]`);
  if (currentThumbnail) {
    currentThumbnail.classList.add('active');
  }
}

// Keyboard navigation for trending products
document.addEventListener('keydown', function(e) {
  // Only handle if trending products section is visible
  const trendingSection = document.querySelector('.trending-products-section');
  if (trendingSection && trendingProductImages.length > 0) {
    if (e.key === 'ArrowLeft') {
      trendingChangeImage(-1);
    } else if (e.key === 'ArrowRight') {
      trendingChangeImage(1);
    }
  }
});
</script>

{% stylesheet %}
/* Modern Trending Products Section */
.trending-products-section {
  padding: 5px 0 15px 0;
  background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
  position: relative;
  overflow: hidden;
}

.trending-header {
  text-align: center;
  margin-bottom: 20px;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  padding: 0 20px;
}

.trending-title {
  font-size: 2rem;
  font-weight: 800;
  color: #1a202c;
  margin: 0 0 16px 0;
  letter-spacing: -0.02em;
  line-height: 1.2;
  background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.trending-subtitle {
  font-size: 14px;
  color: #667eea;
  margin: 0;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.trending-product-container {
  display: flex;
  max-width: 1200px;
  margin: 0 auto;
  gap: 30px;
  align-items: flex-start;
  padding: 0 20px;
}

.trending-product-left {
  flex: 1;
  max-width: 600px;
}

/* Modern Product Gallery Styles */
.product-gallery {
  display: flex;
  flex-direction: row;
  gap: 16px;
  align-items: flex-start;
}

.main-image-container {
  position: relative;
  border-radius: 24px;
  overflow: hidden;
  background: linear-gradient(135deg, #f8fafc, #e2e8f0);
  flex: 1;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
  border: 1px solid rgba(226, 232, 240, 0.6);
}

.main-product-image {
  width: 100%;
  height: 500px;
  object-fit: cover;
  display: block;
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.main-image-container:hover .main-product-image {
  transform: scale(1.02);
}

/* Modern Navigation Arrows */
.gallery-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(226, 232, 240, 0.6);
  border-radius: 50%;
  width: 48px;
  height: 48px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 3;
  color: #1a202c;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
}

.gallery-nav:hover {
  background: rgba(255, 255, 255, 1);
  transform: translateY(-50%) scale(1.1);
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
}

.prev-btn {
  left: 20px;
}

.next-btn {
  right: 20px;
}

.gallery-nav svg {
  width: 20px;
  height: 20px;
}

/* Modern Thumbnail Navigation */
.thumbnail-container {
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100px;
  flex-shrink: 0;
}

.thumbnail-item {
  width: 100px;
  height: 100px;
  border-radius: 16px;
  overflow: hidden;
  cursor: pointer;
  border: 2px solid transparent;
  transition: all 0.3s ease;
  background: linear-gradient(135deg, #f8fafc, #e2e8f0);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
}

.thumbnail-item:hover {
  border-color: #667eea;
  transform: scale(1.05);
  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);
}

.thumbnail-item.active {
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

.thumbnail-item:hover .thumbnail-image {
  opacity: 0.8;
}

.thumbnail-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
  transition: opacity 0.3s ease;
}

.trending-badge {
  position: absolute;
  top: 20px;
  right: 20px;
  background: #dc2626;
  color: white;
  padding: 8px 16px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 700;
  z-index: 2;
  box-shadow: 0 4px 16px rgba(220, 38, 38, 0.3);
  backdrop-filter: blur(10px);
}

.trending-product-right {
  flex: 1;
  max-width: 500px;
}

.product-info-container {
  padding: 0;
}

.trending-product-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.trending-product-title {
  font-size: 1.5rem;
  font-weight: 800;
  color: #1a202c;
  margin: 0 0 8px 0;
  line-height: 1.2;
  letter-spacing: -0.02em;
}

.trending-wishlist-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 8px;
  transition: all 0.3s ease;
  color: #667eea;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.trending-wishlist-btn:hover {
  background: #f0f9eb;
  color: #4caf50;
}

.trending-wishlist-btn.active {
  background: var(--color-accent);
  color: white;
}

.trending-wishlist-btn.active svg {
  fill: white !important;
  stroke: white !important;
}

.trending-wishlist-btn:hover {
  background: var(--color-accent);
  color: white;
  transform: scale(1.05);
}

.trending-wishlist-btn svg {
  width: 24px;
  height: 24px;
}

/* Modern Star Rating Styles */
.product-rating {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.stars {
  display: flex;
  gap: 3px;
}

.star {
  font-size: 16px;
  color: #d1d5db;
}

.star.filled {
  color: #fbbf24;
}

.rating-text {
  font-size: 12px;
  font-weight: 700;
  color: #1a202c;
}

.reviews-text {
  font-size: 10px;
  color: #64748b;
  font-weight: 500;
}

.trending-product-price {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.trending-price {
  font-size: 1.5rem;
  font-weight: 800;
  color: #1a202c;
}

.trending-original-price {
  font-size: 1.2rem;
  color: #a0aec0;
  text-decoration: line-through;
  font-weight: 500;
}

.trending-sale-price {
  font-size: 1.5rem;
  font-weight: 800;
  color: var(--color-accent);
}

.sale-badge {
  background: #dc2626;
  color: white;
  padding: 6px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 700;
  box-shadow: 0 4px 16px rgba(220, 38, 38, 0.3);
}

.trending-buttons {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 8px;
}

.trending-add-to-cart-form {
  margin: 0;
}

.trending-add-to-cart-btn {
  width: 100%;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
}

.trending-add-to-cart-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 32px rgba(102, 126, 234, 0.4);
}

.trending-add-to-cart-btn svg {
  width: 20px;
  height: 20px;
}

/* Product Accordions */
.trending-accordions {
  margin-top: 4px;
}

.accordion-item {
  border: 1px solid #e2e8f0;
  border-radius: 6px;
  margin-bottom: 4px;
  overflow: hidden;
  background: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.accordion-header {
  width: 100%;
  background: #f8fafc;
  border: none;
  padding: 10px 14px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  font-weight: 600;
  color: #374151;
  transition: all 0.3s ease;
}

.accordion-header:hover {
  background: #f1f5f9;
}

.accordion-icon {
  transition: transform 0.3s ease;
}

.accordion-item.active .accordion-icon {
  transform: rotate(180deg);
}

.accordion-content {
  display: none;
  background: white;
  padding: 10px 14px;
}

.accordion-item.active .accordion-content {
  display: block;
}

.accordion-content p {
  margin: 0;
  font-size: 13px;
  line-height: 1.4;
  color: #4a5568;
}

.view-details-link {
  color: #667eea;
  text-decoration: none;
  font-weight: 600;
  font-size: 13px;
  transition: all 0.3s ease;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  margin-top: 6px;
}

.view-details-link:hover {
  color: #5a67d8;
  transform: translateX(4px);
}

/* Mobile Styles */
@media (max-width: 768px) {
  .trending-products-section {
    padding: 40px 0;
  }
  
  .trending-header {
    margin-bottom: 30px;
    text-align: center;
    padding: 0 15px;
  }
  
  .trending-title {
    font-size: 1.6rem;
    text-align: center;
  }
  
  .trending-subtitle {
    text-align: center;
    font-size: 12px;
  }
  
  .trending-product-container {
    flex-direction: column;
    gap: 30px;
    padding: 0 15px;
    align-items: center;
  }
  
  .trending-product-left,
  .trending-product-right {
    max-width: 100%;
    width: 100%;
  }
  
  .trending-product-title {
    font-size: 1.4rem;
    text-align: center;
  }
  
  /* Mobile Gallery Layout */
  .product-gallery {
    flex-direction: column;
    gap: 20px;
    align-items: center;
  }
  
  /* Show thumbnails on mobile below main image */
  .thumbnail-container {
    display: flex;
    flex-direction: row;
    justify-content: center;
    flex-wrap: wrap;
    width: 100%;
    gap: 12px;
    order: 2; /* Move thumbnails below main image */
  }
  
  .main-image-container {
    order: 1; /* Keep main image on top */
    width: 100%;
    max-width: 400px;
  }
  
  .thumbnail-item {
    width: 70px;
    height: 70px;
  }
  
  .main-product-image {
    height: 350px;
  }
  
  .trending-buttons {
    gap: 12px;
    align-items: center;
  }
  
  .trending-add-to-cart-btn {
    padding: 14px 20px;
    font-size: 13px;
    width: 100%;
    max-width: 300px;
    margin: 0 auto;
  }
  
  .trending-product-price {
    justify-content: center;
    text-align: center;
  }
  
  .trending-product-header {
    justify-content: center;
    gap: 10px;
  }
  
  .product-rating {
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .trending-products-section {
    padding: 30px 0;
  }
  
  .trending-header {
    margin-bottom: 25px;
    padding: 0 10px;
  }
  
  .trending-title {
    font-size: 1.4rem;
    text-align: center;
  }
  
  .trending-subtitle {
    text-align: center;
    font-size: 11px;
  }
  
  .trending-product-container {
    gap: 25px;
    padding: 0 10px;
    align-items: center;
  }
  
  .trending-product-title {
    font-size: 1.2rem;
    text-align: center;
  }
  
  .main-image-container {
    max-width: 350px;
  }
  
  .main-product-image {
    height: 280px;
  }
  
  /* Smaller thumbnails on very small screens */
  .thumbnail-item {
    width: 55px;
    height: 55px;
  }
  
  .trending-buttons {
    gap: 10px;
    align-items: center;
  }
  
  .trending-add-to-cart-btn {
    padding: 12px 18px;
    font-size: 12px;
    width: 100%;
    max-width: 280px;
    margin: 0 auto;
  }
  
  .trending-product-price {
    justify-content: center;
    text-align: center;
    flex-wrap: wrap;
  }
  
  .trending-product-header {
    justify-content: center;
    gap: 8px;
  }
  
  .product-rating {
    justify-content: center;
  }
  
  .trending-wishlist-btn {
    margin-left: 0;
  }
}
{% endstylesheet %}

<script>
// Simple accordion functionality
document.addEventListener('DOMContentLoaded', function() {
  console.log('DOM loaded, setting up accordions...');
  
  // Get all accordion headers
  const accordionHeaders = document.querySelectorAll('.accordion-header');
  console.log('Found accordion headers:', accordionHeaders.length);
  
  // Add click event to each header
  accordionHeaders.forEach(header => {
    header.addEventListener('click', function(e) {
      e.preventDefault();
      console.log('Accordion header clicked!');
      
      // Get the accordion item
      const accordionItem = this.closest('.accordion-item');
      
      // Check if this accordion is currently active
      const isActive = accordionItem.classList.contains('active');
      
      // Close all accordions first
      document.querySelectorAll('.accordion-item').forEach(item => {
        item.classList.remove('active');
      });
      
      // If this accordion wasn't active, open it
      if (!isActive) {
        accordionItem.classList.add('active');
        console.log('Accordion opened!');
      } else {
        console.log('Accordion closed!');
      }
    });
  });
  
  // No default open accordion - all start closed
  console.log('All accordions start closed');
  
  // Debug: Check if content exists
  const allContent = document.querySelectorAll('.accordion-content');
  console.log('Total accordion content elements:', allContent.length);
  allContent.forEach((content, index) => {
    console.log(`Content ${index + 1}:`, content.textContent.trim());
  });
});
</script>

{% schema %}
{
  "name": "Trending Products",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Testing Trending Products"
    },
    {
      "type": "text",
      "id": "section_subtitle",
      "label": "Section Subtitle",
      "default": "Most sold products today - Add to cart directly!"
    },
    {
      "type": "header",
      "content": "Featured Product"
    },
    {
      "type": "product",
      "id": "featured_product",
      "label": "Featured Product"
    },
    {
      "type": "text",
      "id": "love_text",
      "label": "Customer Love Text",
      "default": "LOVED BY OUR CUSTOMERS"
    },
    {
      "type": "text",
      "id": "shipping_text",
      "label": "Shipping Text",
      "default": "Shipping and taxes included."
    },
    {
      "type": "range",
      "id": "manual_rating",
      "label": "Star Rating",
      "min": 4.0,
      "max": 5.0,
      "step": 0.1,
      "default": 4.6,
      "info": "Leave empty to use auto-generated rating"
    },
    {
      "type": "number",
      "id": "manual_review_count",
      "label": "Review Count",
      "default": 2453,
      "info": "Leave empty to use auto-generated count"
    },
    {
      "type": "header",
      "content": "Badge Settings"
    },
    {
      "type": "checkbox",
      "id": "show_badge",
      "label": "Show Trending Badge",
      "default": true
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "ðŸ”¥ HOT"
    },
    {
      "type": "header",
      "content": "Accordion Content"
    },
    {
      "type": "textarea",
      "id": "product_details",
      "label": "Product Details Text",
      "default": "Premium quality product with durable construction. Made from high-grade materials for long-lasting performance."
    },
    {
      "type": "textarea",
      "id": "shipping_info",
      "label": "Shipping Information Text",
      "default": "Free shipping above â‚¹299. Delivery: 3-5 days. Express available."
    },
    {
      "type": "textarea",
      "id": "how_to_use",
      "label": "How to Use Text",
      "default": "Follow included manual. Ensure proper setup for best results."
    }
  ],
  "presets": [
    {
      "name": "Trending Products"
    }
  ]
}
{% endschema %} 